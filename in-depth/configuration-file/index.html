<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Configuration file - MoMEMta</title>
      
      
      
        <link rel="canonical" href="https://momemta.github.io/in-depth/configuration-file/">
      
      
        <meta name="author" content="The MoMEMta team">
      
    
    <meta property="og:url" content="https://momemta.github.io/in-depth/configuration-file/">
    <meta property="og:title" content="MoMEMta">
    <meta property="og:image" content="https://momemta.github.io/in-depth/configuration-file//../../images/logo.png">
    <meta name="apple-mobile-web-app-title" content="MoMEMta">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../images/logo.png">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../None">
    <link rel="icon" type="image/x-icon" href="../../None">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-4e67be2226.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-2d6c5d2926.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script src="../../assets/javascripts/modernizr-4a5cc7e01e.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-blue-grey palette-accent-teal">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                In depth <i class="icon icon-link"></i>
              
            
          </span>
        
        Configuration file
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/MoMEMta/MoMEMta" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../images/logo.png">
        </div>
      
      <div class="name">
        <strong>
          MoMEMta
          <span class="version">
            0.1.0
          </span>
        </strong>
        
          <br>
          MoMEMta/MoMEMta
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/MoMEMta/MoMEMta/archive/0.1.0.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/MoMEMta/MoMEMta/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Main" href="../..">
      Main
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="What is MoMEMta?" href="../../introduction/">
      What is MoMEMta?
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Getting started" href="../../getting-started/">
      Getting started
    </a>
    
  </li>

          
            
  <li>
    <span class="section">In depth</span>
    <ul>
      
        
  <li>
    <a class="" title="Calling MoMEMta" href="../calling-momemta/">
      Calling MoMEMta
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Configuration file" href="./">
      Configuration file
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Configuring modules" href="#configuring-modules">
                Configuring modules
              </a>
            </li>
          
            <li class="anchor">
              <a title="Default inputs, outputs and parameters " href="#default-inputs-outputs-and-parameters">
                Default inputs, outputs and parameters 
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
          <hr>
          <ul>
          
              
              
              <li>
                <a href="https://momemta.github.io" target="_blank" title="Change log">
                    Change log
                </a>
              </li>
          
              
              
              <li>
                <a href="https://trello.com/b/lQXfKafM/momemta-roadmap" target="_blank" title="Roadmap">
                    Roadmap
                </a>
              </li>
          
              
              
              <li>
                <a href="https://momemta.github.io/MoMEMta/" target="_blank" title="Technical documentation">
                    Technical documentation
                </a>
              </li>
          
              
              
              <li>
                <a href="mailto:momemta-contact@cern.ch" target="_blank" title="Contact us">
                    Contact us
                </a>
              </li>
          
          </ul>
        
        
        <span class="section"><small>This work would not have been possible without the help of the MadWeight team and funding of</small></span>
        <div class="logos">
          <a href="http://www.uclouvain.be"><img src="../../assets/images/UCL-dab39722f2.png"></a>
          <a href="http://cp3.irmp.ucl.ac.be"><img src="../../assets/images/CP3-1602821e56.png"></a>
        </div>
        <div class="logos">
          <a href="http://www.frs-fnrs.be"><img src="../../assets/images/FNRS-3f43ef8877.png"></a>
          <a href="http://www.pd.infn.it/AMVA4NewPhysics"><img src="../../assets/images/AMVA4-bb51b35e33.png"></a>
        </div>
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="the-configuration-file">The configuration file<a class="headerlink" href="#the-configuration-file" title="Permanent link">#</a></h1>
<h2 id="configuring-modules">Configuring modules<a class="headerlink" href="#configuring-modules" title="Permanent link">#</a></h2>
<p>Declaring a module named <code>karl</code> of type <code>Gaussian</code> in Lua is simple:</p>
<div class="code"><pre><span></span>Gaussian.karl = {}
</pre></div>


<p>Each module can be configured by setting its parameters and its inputs:</p>
<div class="code"><pre><span></span><span class="n">Gaussian</span><span class="p">.</span><span class="n">karl</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">Gaussian</span><span class="p">.</span><span class="n">friedrich</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">-- Some fixed parameters</span>
    <span class="n">age</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mf">1.75</span><span class="p">,</span>
    <span class="n">place</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Gottingen&quot;</span><span class="p">,</span>
    <span class="n">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">-- Define inputs using other modules’ outputs</span>
    <span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">karl::output&quot;</span>
<span class="p">}</span>
</pre></div>


<p>A <strong>parameter</strong> can be an integer (eg.: <code>2</code>), a floating point number, (eg.: <code>172.5</code>, <code>13000.</code> - note the decimal point <em>must</em> be present), a boolean (<code>true</code> or <code>false</code>) or a string (eg.: <code>hello</code>). Parameters might have default values and be optional, or be mandatory.</p>
<p>An <strong>input</strong> is set through a so-called "<strong>input tag</strong>" of the form <code>other_module::its_output[/i]</code>, where <code>other_module</code> is the name of another module responsible for producing the quantity <code>its_output</code>, and <code>/i</code> has to be used when the produced quantity in question is a vector and only a specific entry of that vector is needed as input. </p>
<p>Some modules expect <strong>vectors</strong> of input tags, where the order of the entries may or nor matter. Vectors in Lua are easily declared:</p>
<div class="code"><pre><span></span><span class="c1">-- Take first and third entry of vector output `output` of module `that_module`</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;</span><span class="s">that_module::output/1&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">that_module::output/3&quot;</span> <span class="p">}</span>
</pre></div>


<p>Accessing entries of previously defined vectors is also possible:</p>
<div class="code"><pre><span></span><span class="n">temp_vector</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;</span><span class="s">first&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">second&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">third&quot;</span> <span class="p">}</span>
<span class="c1">-- Use only { &quot;first&quot;, &quot;third&quot; }:</span>
<span class="n">my_inputs</span> <span class="o">=</span> <span class="p">{</span> <span class="n">temp_vector</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">temp_vector</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">}</span>
</pre></div>


<p><strong>NB</strong>: The indexing of Lua vectors or input tags starts at <strong>1, not 0</strong>.</p>
<p>When declared, a module tells MoMEMta how many dimensions it adds to the integration (for instance, adding a transfer function on the energy of a jet means integrating over the energy of the corresponding parton). If a module adds a dimension, it also means it requires a component of the phase-space point to be specified as input (see below). MoMEMta keeps track of the total number of dimensions needed for the integration. </p>
<p>The order in which the modules are declared in the script does not matter: MoMEMta automatically executes the module in an order such that inputs are always well-defined (obviously, circular dependencies are forbidden). By default, modules whose outputs are not used by any other module, and modules whose inputs are not produced by any other modules are not executed.</p>
<h2 id="default-inputs-outputs-and-parameters">Default inputs, outputs and parameters <a name=defaults></a><a class="headerlink" href="#default-inputs-outputs-and-parameters" title="Permanent link">#</a></h2>
<p>Some inputs and outputs are not defined by any module <em>per se</em> but are used by MoMEMta to pass and retrieve important quantities:</p>
<p>Inputs:</p>
<ul>
<li>
<p><code>input::particles</code>: Vector of LorentzVectors passed as argument to <code>computeWeights()</code></p>
</li>
<li>
<p><code>input::met</code>: LorentzVector of the observed MET (optional argument to <code>computeWeights()</code>)</p>
</li>
<li>
<p><code>cuba::ps_points</code>: Vector of doubles between 0 and 1. Phase-space point, ie. set of random numbers launched by Cuba to perform the integration. The length of the vector is the total number of integration dimensions declared by the modules. Instead of manually specifying the <code>cuba::ps_points/i</code> input tags, it is possible to use to <code>getpspoint()</code> function (which automatically increases “i” each time it is called).</p>
</li>
<li>
<p><code>cuba::ps_weight</code>: (double) Weight associated with the phase-space point</p>
</li>
</ul>
<p>Outputs:</p>
<ul>
<li><code>integrands</code>: Vector of doubles. This is the value taken to be the integrand, returned to Cuba to compute the integral. Exactly <strong>one</strong> declared module <strong>must</strong> produce this quantity.</li>
</ul>
<p>Parameters:</p>
<ul>
<li>
<p><code>cuba</code></p>
</li>
<li>
<p><code>parameters</code></p>
</li>
</ul>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../calling-momemta/" title="Calling MoMEMta">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Calling MoMEMta
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'MoMEMta/MoMEMta';
    </script>
    <script src="../../assets/javascripts/application-dfb6964a49.js"></script>
    
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    
    
  </body>
</html>